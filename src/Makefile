OBJS = ast.cmo sast.cmo cgen.cmo parser.cmo scanner.cmo gpl.cmo

gpl: $(OBJS)
	ocamlc -g -o gpl unix.cma $(OBJS)

all: clean gpl

.PHONY : test
test: gpl
	../test/runtests.sh

scanner.ml: scanner.mll
	ocamllex $<

parser.ml parser.mli: parser.mly
	ocamlyacc -v $<

%.cmo: %.ml
	ocamlc -g -c $<

%.cmi: %.mli
	ocamlc -g -c $<

.PHONY: clean
clean:
	rm -f gpl parser.ml parser.mli parser.output scanner.ml *.cmo *.cmi

# Generated by ocamldep *.ml *.mli
ast.cmo :
ast.cmx :
cgen.cmo : ast.cmo
cgen.cmx : ast.cmx
gpl.cmo : scanner.cmo sast.cmo parser.cmi cgen.cmo ast.cmo
gpl.cmx : scanner.cmx sast.cmx parser.cmx cgen.cmx ast.cmx
parser.cmo : ast.cmo parser.cmi
parser.cmx : ast.cmx parser.cmi
sast.cmo :
sast.cmx :
scanner.cmo : parser.cmi
scanner.cmx : parser.cmx
